<!DOCTYPE html>
<html>
  <head>
    <title>Todo App</title>
  </head>
  <body>
    <h1>Todo List</h1>
    <form action="/todos" method="post">
      <label for="name">TodoName:</label>
      <input type="text" id="name" name="name" required>
      <br>
      <label for="description">Description:</label>
      <input type="text" id="description" name="description" required>
      <br>
      <button type="submit">Add Item</button>
    </form>
   
    <div id="todos">
      <h2>Todo Items</h2>
      <ul id="todo-list"></ul>
    </div>
    <div id="completed">
      <h2>Completed Items</h2>
      <ul id="completed-list"></ul>
    </div>
    <script>
      const todoList = document.getElementById('todo-list');
      const completedList = document.getElementById('completed-list');
    
      // Function to add a new todo item to the list
      const addTodo = (todo) => {
        const li = document.createElement('li');
        li.innerText = todo.name + ' - ' + todo.description;
        
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.addEventListener('change', () => {
          if (checkbox.checked) {
            // Move item to completed list
            completedList.appendChild(li);
          } else {
            // Move item back to todo list
            todoList.appendChild(li);
          }
        });
        
        const deleteBtn = document.createElement('button');
        deleteBtn.innerText = 'Delete';
        deleteBtn.addEventListener('click', () => {
          li.remove();
        });
        
        li.appendChild(checkbox);
        li.appendChild(deleteBtn);
        
        todoList.appendChild(li);
      };
    
      // Function to fetch all todo items from the server and add them to the list
      const fetchTodos = async () => {
        const response = await fetch('/todos');
        const todos = await response.json();
        
        todos.forEach(todo => {
          addTodo(todo);
        });
      };
      
      fetchTodos();
    
      // Function to handle form submission
      const handleSubmit = async (event) => {
        event.preventDefault();
        
        const formData = new FormData(event.target);
        const name = formData.get('name');
        const description = formData.get('description');
        
        const response = await fetch('/todos', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ name, description })
        });
        
        if (response.ok) {
          const todo = await response.json();
          addTodo(todo);
          event.target.reset();
        }
      };
      
      const form = document.querySelector('form');
      form.addEventListener('submit', handleSubmit);
    </script>
    </body>
    </html>